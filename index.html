<!DOCTYPE html>
<html lang="en" ng-app="IdleLands">
  <head>
    <title>Idle Lands</title>
    <link href="./css/lib.css" rel="stylesheet">
    <link href="./css/index.css" rel="stylesheet">
    <link href="./favicon.ico" rel="shortcut icon" type="image/x-icon"><script>if(window.location.host === 'idlelands.github.io') window.location = 'http://webfe.idle.land'</script>
  </head>
  <body ng-controller="Head" md-theme="{{theme}}" md-theme-watch>
    <base href="/">
    <md-toolbar ng-if="!player">
      <h1 class="md-toolbar-tools"><span>Idle Lands</span></h1>
    </md-toolbar>
    <md-content scroll-y flex ui-view layout="column" layout-fill class="md-content-padding"></md-content>
    <script src="./js/lib.js"></script>
    <script src="./js/index.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q || []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-56283183-1', 'auto');ga('send', 'pageview');</script>
  </body>
</html>


<script id="login-advlogin" type="text/ng-template">
  <div flex="25" layout="column" class="tab-text">
    <form>
      <md-input-container>
        <label>Identifier</label>
        <input ng-model="advLogin.identifier"/>
      </md-input-container>
      <md-input-container>
        <label>Password</label>
        <input ng-model="advLogin.password" type="password"/>
      </md-input-container>
      <md-checkbox ng-model="advLogin.remember" class="no-margin-left">Remember Me</md-checkbox>
      <md-button ng-disabled="isSubmitting" ng-click="doAdvancedLogin()" aria-label="Login button" class="md-raised md-primary"><span ng-if="!isSubmitting">Log In</span><span ng-if="isSubmitting">Logging in...</span></md-button>
    </form>
  </div>
  <div flex="50" offset="15" layout="column" layout-align="space-around center" class="tab-text box-text">
    <div>Welcome to Idle Lands!</div>
    <div class="text-center"><span>This area is for people who know their identifier and would like to log in from a different location. Identifiers are unique per location (ie, irc.esper.net#seiyria) so if you know your identifier, you can log in with a character created elsewhere!</span></div>
    <div class="text-center md-warn">
      <div ng-show="advLogin.remember">Note! This caches your credentials in localStorage, which is super insecure! Do not check this if this isn't your computer!</div>
    </div>
  </div>
</script>


<script id="login" type="text/ng-template">
  <md-content layout="row" class="is-flex auto-flex">
    <div flex="45" offset="10">
      <md-card layout="row" layout-align="center" id="login-tabs" style="height: 365px">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Portal to Idliathlia</h3>
            </div>
          </md-toolbar>
          <md-tabs md-selected="selectedIndex" class="md-accent">
            <md-tab on-select="selectTab(0)" label="Login" ng-disabled="isSubmitting">
              <div layout="row" layout-fill="layout-fill" layout-align="left center" ng-include="'login-login'" class="tab"></div>
            </md-tab>
            <md-tab on-select="selectTab(1)" label="Register" ng-disabled="isSubmitting">
              <div layout="row" layout-fill="layout-fill" layout-align="left center" ng-include="'login-register'" class="tab"></div>
            </md-tab>
            <md-tab on-select="selectTab(2)" label="Advanced Login" ng-disabled="isSubmitting">
              <div layout="row" layout-fill="layout-fill" layout-align="left center" ng-include="'login-advlogin'" class="tab"></div>
            </md-tab>
          </md-tabs>
        </md-card-content>
      </md-card>
      <md-card layout="row" layout-align="center" style="height: 390px">
        <md-card-content flex="100">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Screenshots</h3>
            </div>
          </md-toolbar>
          <md-content>
            <ul rn-carousel="rn-carousel" rn-carousel-controls="true" class="image">
              <li ng-repeat="slide in gallery">
                <div class="layer"><img ng-src="{{slide}}" height="330px" width="100%"/></div>
              </li>
            </ul>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="35">
      <md-card>
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Live Action</h3>
            </div>
          </md-toolbar>
          <md-content flex="85" style="flex-basis:400px;height:400px;overflow-x:hidden;height:700px" layout="column" class="is-flex auto-flex">
            <div style="min-height:125px; max-height:125px" flex="100" ng-repeat="event in _events" layout="row" class="is-flex auto-flex adventure-log-item">
              <div flex="10" class="text-center vertical-center"><span class="fa fa-fw fa-2x {{::eventTypeToIcon[event.type]}}"></span></div>
              <div flex="90"><small am-time-ago="event.createdAt"></small>
                <div ng-bind-html="event.message | linky:'_blank'"></div>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
  </md-content>
</script>


<script id="login-login" type="text/ng-template">
  <div flex="25" layout="column" class="tab-text">
    <form>
      <md-input-container>
        <label>Character Name</label>
        <input ng-model="login.name"/>
      </md-input-container>
      <md-input-container>
        <label>Password</label>
        <input ng-model="login.password" type="password"/>
      </md-input-container>
      <md-checkbox ng-model="login.remember" class="no-margin-left">Remember Me</md-checkbox>
      <md-button ng-disabled="isSubmitting" ng-click="doLogin()" aria-label="Login button" class="md-raised md-primary"><span ng-if="!isSubmitting">Log In</span><span ng-if="isSubmitting">Logging in...</span></md-button>
    </form>
  </div>
  <div flex="50" offset="15" layout="column" layout-align="space-around center" class="tab-text box-text">
    <div>Welcome to Idle Lands!</div>
    <div class="text-center"><span>If you've previously registered a character, log in here. Otherwise, head over to&nbsp;</span><a ng-click="selectTab(1)" class="inline-link">the Register tab</a><span>&nbsp;to make a new character!</span></div>
    <div class="text-center md-background">
      <div ng-show="login.remember">Note! This caches your credentials in localStorage, which is super insecure! Do not check this if this isn't your computer!</div>
    </div>
  </div>
</script>


<script id="login-register" type="text/ng-template">
  <div flex="25" layout="column" class="tab-text">
    <form>
      <md-input-container>
        <label>Character Name</label>
        <input ng-model="register.name"/>
      </md-input-container>
      <md-input-container>
        <label>Password</label>
        <input ng-model="register.password" type="password"/>
      </md-input-container>
      <md-checkbox ng-model="register.remember" class="no-margin-left">Remember Me</md-checkbox>
      <md-button ng-disabled="isSubmitting" ng-click="doRegister()" aria-label="Register button" class="md-raised md-primary"><span ng-if="!isSubmitting">Register</span><span ng-if="isSubmitting">Registering...</span></md-button>
    </form>
  </div>
  <div flex="50" offset="15" layout="column" layout-align="space-around center" class="tab-text box-text">
    <div>Welcome to Idle Lands!</div>
    <div class="text-center"><span>Register your character here! Just put in a name and a password, and you're ready to go!</span></div>
    <div class="text-center md-warn">
      <div ng-show="register.remember">Note! This caches your credentials in localStorage, which is super insecure! Do not check this if this isn't your computer!</div>
    </div>
  </div>
</script>


<script id="pet-equipment" type="text/ng-template">
  <md-list class="flex-scroll has-height">
    <md-item ng-repeat="item in ::petSoulEtc track by $index">
      <md-item-content ng-include="'pet-equipment-item'"></md-item-content>
    </md-item>
    <md-item ng-repeat="item in sortedPetEquipment track by $index">
      <md-item-content ng-include="'pet-equipment-item'"></md-item-content>
    </md-item>
  </md-list>
</script>
<script id="pet-equipment-item" type="text/ng-template">
  <div class="md-tile-left class-badge text-center align-left-list-item">
    <div class="{{::itemUtilities.classToColor(item.itemClass)}}">{{::item.type}}
      <md-tooltip>{{::item.itemClass}}</md-tooltip>
    </div>
    <div ng-if="item.extraItemClass" class="{{::itemUtilities.classToColor(item.extraItemClass)}}">{{item.extraText}}</div>
    <div ng-if="!item.hideButtons" class="text-center"><span ng-click="unequipItem(item)" class="hover-cursor fa fa-fw fa-exchange">
        <md-tooltip>Unequip</md-tooltip></span></div>
  </div>
  <div class="md-tile-content item-line">
    <div><span class="super-bold">{{item.enchantLevel ? '+'+item.enchantLevel+' ' : ''}} {{::item.name}}</span><small ng-if="!item.hideButtons"><span>, found</span><span>&nbsp;</span><span am-time-ago="::item.foundAt"></span><span>, with a Player Relativity of</span><span>&nbsp;{{petItemScore(item)}}%&nbsp;</span><span>and an Item Relativity of</span><span>&nbsp;{{itemItemScore(item)}}%</span></small></div>
    <div layout="row" class="top-margin-5 wrap-container"><span ng-repeat="stat in ::itemUtilities.equipmentStatArray" flex="8"><span class="fa fa-fw fa-lg {{::stat.fa}}">
          <md-tooltip>{{::stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(item[stat.name])}}">{{item[stat.name]}}</small><small>&nbsp;/&nbsp;</small><small class="{{valueToColor(item[stat.name+'Percent'])}}">{{item[stat.name+'Percent']}}%</small></span></div>
    <div class="top-margin-5"><small>{{getExtraStats(item)}}</small></div>
  </div>
</script>


<script id="pet-inventory" type="text/ng-template">
  <md-list class="flex-scroll has-height">
    <md-item ng-repeat="item in petItems track by $index">
      <md-item-content>
        <div class="md-tile-left class-badge text-center align-left-list-item">
          <div class="{{::itemUtilities.classToColor(item.itemClass)}}">{{::item.type}}
            <md-tooltip>{{::item.itemClass}}</md-tooltip>
          </div>
          <div ng-if="item.extraItemClass" class="{{::itemUtilities.classToColor(item.extraItemClass)}}">{{item.extraText}}</div>
          <div class="text-center"><span ng-click="sellItem($index)" class="hover-cursor fa fa-fw icon-money">
              <md-tooltip>Sell</md-tooltip></span><span ng-click="equipItem(item, $index)" ng-class="{'text-red': !canEquipItem(item)}" class="hover-cursor fa fa-fw fa-exchange">
              <md-tooltip>Equip</md-tooltip></span><span ng-click="swapItem($index)" class="hover-cursor fa fa-fw fa-child">
              <md-tooltip>Take from pet</md-tooltip></span></div>
        </div>
        <div class="md-tile-content item-line">
          <div><span class="super-bold">{{item.enchantLevel ? '+'+item.enchantLevel+' ' : ''}} {{::item.name}}</span><small><span>, found</span><span>&nbsp;</span><span am-time-ago="::item.foundAt"></span><span>, with a Player Relativity of</span><span>&nbsp;{{petItemScore(item)}}%&nbsp;</span><span>and an Item Relativity of</span><span>&nbsp;{{itemItemScore(item)}}%</span></small></div>
          <div layout="row" class="top-margin-5 wrap-container"><span ng-repeat="stat in ::itemUtilities.equipmentStatArray" flex="8"><span class="fa fa-fw fa-lg {{::stat.fa}}">
                <md-tooltip>{{::stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(item[stat.name])}}">{{item[stat.name]}}</small><small>&nbsp;/&nbsp;</small><small class="{{valueToColor(item[stat.name+'Percent'])}}">{{item[stat.name+'Percent']}}%</small></span></div>
          <div class="top-margin-5"><small>{{itemUtilities.getExtraStats(item)}}</small></div>
        </div>
      </md-item-content>
    </md-item>
  </md-list>
</script>


<script id="pet-overview" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container">
    <div flex="30" layout="column">
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Vitals</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding hide-y-scrollbar">
            <div ng-if="!pet"><span>No Pets Purchased</span></div>
            <div layout="row" ng-if="pet">
              <div flex="33" class="vital-stat"><span class="fa fa-fw fa-heart fa-lg text-red vertical-center">
                  <md-tooltip>Max HP</md-tooltip></span><span>&nbsp;</span><small>{{pet.hp.maximum | number:0 }}</small></div>
              <div flex="33" class="vital-stat"><span class="fa fa-fw fa-magic fa-lg text-blue vertical-center">
                  <md-tooltip>Max MP</md-tooltip></span><span>&nbsp;</span><small>{{pet.mp.maximum | number:0}}</small></div>
              <div flex="33" class="vital-stat"><span class="fa fa-fw fa-asterisk fa-lg text-yellow vertical-center">
                  <md-tooltip>Special Stat</md-tooltip></span><span>&nbsp;</span><small>{{pet.special.name || 'None'}}</small></div>
            </div>
            <div layout="row" ng-if="pet">
              <div flex="25" class="vital-stat"><span class="fa fa-fw icon-money fa-lg text-gold vertical-center">
                  <md-tooltip>Gold</md-tooltip></span><span>&nbsp;</span><small>{{pet.gold.__current | number:0}}</small></div>
            </div>
            <div layout="row" ng-if="pet" class="wrap-container">
              <div ng-repeat="stat in equipmentStatArray" flex="25" class="vital-stat"><span class="fa fa-fw fa-lg vertical-center {{stat.fa}}">
                  <md-tooltip>{{stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(pet._statCache[stat.name])}}">{{pet._statCache[stat.name] || 0 | number:0}}</small></div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Controls</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div layout="column">
              <div class="vital-stat"><span class="fa fa-fw fa-dashboard"></span>
                <md-button ng-click="toPlayerView()" class="inline-button md-primary md-raised md-hue-1">Swap to Player View</md-button>
              </div>
              <div ng-if="pet" class="vital-stat"><span class="fa fa-fw fa-{{getSmartIcon('Sell')}}"></span>
                <md-button ng-click="toggleSmart('Sell')" class="inline-button md-accent md-raised">Smart Sell
                  <md-tooltip>Low-quality items are sold first.</md-tooltip>
                </md-button>
              </div>
              <div ng-if="pet" class="vital-stat"><span class="fa fa-fw fa-{{getSmartIcon('Equip')}}"></span>
                <md-button ng-click="toggleSmart('Equip')" class="inline-button md-accent md-raised">Smart Equip
                  <md-tooltip>High-quality gear is auto-equipped.</md-tooltip>
                </md-button>
              </div>
              <div ng-if="pet" class="vital-stat"><span class="fa fa-fw fa-{{getSmartIcon('Self')}}"></span>
                <md-button ng-click="toggleSmart('Self')" class="inline-button md-accent md-raised">Smart Self
                  <md-tooltip>Pet upgrades itself.</md-tooltip>
                </md-button>
              </div>
              <div ng-if="pet" class="vital-stat"><span class="fa fa-fw icon-money"></span>
                <md-button ng-click="takePetGold()" class="inline-button md-warn md-raised">Take Pet Gold</md-button>
              </div>
              <div ng-if="pet" class="vital-stat"><span class="fa fa-fw fa-cutlery"></span>
                <md-button ng-click="feedPet()" class="inline-button md-warn md-raised">Feed Pet</md-button>
              </div>
              <div ng-if="pet" class="vital-stat"><span class="fa fa-fw fa-shield"></span>
                <md-select ng-model="pet.professionName" ng-change="changePetClass()" class="no-margin-top">
                  <md-select-label>{{pet.professionName}}</md-select-label>
                  <md-option ng-value="class" ng-repeat="class in availablePetClasses()">{{class}}</md-option>
                </md-select>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Miscellaneous</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding hide-y-scrollbar">
            <div ng-if="!pet"><span>No Pets Purchased</span></div>
            <div layout="column" ng-if="pet">
              <div><span class="fa fa-fw fa-clock-o"></span><span>&nbsp;{{pet.creator.name}} originally found this pet <span am-time-ago='pet.createdAt'></span>
                  <md-tooltip>{{pet.createdAt | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}</md-tooltip></span></div>
              <div><span class="fa fa-fw fa-{{getTypeIcon(pet)}}"></span><span>&nbsp;{{pet._configCache.category}}</span></div>
              <div><span class="fa fa-fw fa-{{getGenderFor(pet)}}"></span><span>&nbsp;{{pet.gender}}</span></div>
              <div><span class="fa fa-fw fa-link"></span><span>&nbsp;Max Item Score: {{pet._baseStats.itemFindRange | number:0}}</span></div>
              <div ng-if="pet.nextItemFind"><span class="fa fa-fw fa-refresh"></span><span>&nbsp;Next item find <span am-time-ago='pet.nextItemFind'></span></span></div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="30" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar ng-if="availablePets().length !== 0">
            <div class="md-toolbar-tools">
              <h3>Unpurchased Pets</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:60px;height:60px" layout="column" ng-if="availablePets().length !== 0" class="is-flex auto-flex card-padding">
            <div style="min-height:60px;align-items:center" flex="100" ng-repeat="pet in availablePets()" layout="row" class="is-flex auto-flex adventure-log-item">
              <div flex="10" ng-class="{'text-green hover-cursor animated-hover': canBuyPet(pet), 'text-red': !canBuyPet(pet)}" class="vertical-center text-center faa-parent"><span ng-click="tryToBuyPet(pet)" class="fa fa-fw fa-lg icon-money faa-shake"></span></div>
              <div flex="90">Unlock {{pet.type}} - {{pet.cost | number:0}} gold</div>
            </div>
          </md-content>
          <md-toolbar ng-if="pets.length">
            <div class="md-toolbar-tools">
              <h3>Your Pets</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:60px;height:60px" layout="column" ng-if="pets.length" class="is-flex auto-flex">
            <div style="min-height:60px;align-items:center" flex="100" ng-repeat="pet in getPetsInOrder()" layout="row" class="is-flex auto-flex adventure-log-item">
              <div flex="10" class="vertical-center text-center faa-parent animated-hover hover-cursor"><span ng-class="{'text-green': pet.isActive, 'text-tertiary': !pet.isActive}" ng-click="doPetSwap(pet.createdAt)" class="fa fa-fw fa-lg fa-certificate faa-spin"></span></div>
              <div flex="90">
                <div>{{pet.name}}, the {{pet.type}}</div>
                <div>Level {{pet.level.__current}} {{pet.professionName}}</div>
                <div>Inventory {{pet.inventory.length}}/{{pet._configCache.scale.inventory[pet.scaleLevel.inventory]}}</div>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="40" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Upgrade Levels</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:20px;height:20px" layout="column" class="is-flex auto-flex card-padding hide-y-scrollbar">
            <div ng-if="!pet">No Pets Purchased</div>
            <table ng-if="pet">
              <tr>
                <th>Stat</th>
                <th>Level</th>
                <th>Gift</th>
                <th></th>
              </tr>
              <tr ng-repeat="(stat, level) in pet.scaleLevel">
                <td>{{petUpgradeData[stat].stat}}</td>
                <td><span>{{pet.scaleLevel[stat]+1}}/{{pet._configCache.scale[stat].length}}</span></td>
                <td><span>{{petUpgradeData[stat].gift.split('%gift').join(formatGift(stat, pet._configCache.scale[stat][pet.scaleLevel[stat]]))}}</span></td>
                <td>
                  <md-button ng-disabled="pet.scaleLevel[stat]+1 === pet._configCache.scale[stat].length" ng-click="upgradeStat(stat)" class="inline-button md-accent md-raised">Upgrade
                    <md-tooltip>Next Level Cost: {{pet._configCache.scaleCost[stat][pet.scaleLevel[stat]+1] | number:0}} gold</md-tooltip>
                  </md-button>
                </td>
              </tr>
            </table>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
  </div>
</script>
<script id="buy-pet" type="text/ng-template">
  <md-dialog>
    <md-content>
      <md-subheader class="md-sticky-no-effect">
        <h2>Procure a New Pet: {{petType}}</h2>
      </md-subheader>
      <div layout="row">
        <div></div>
        <md-input-container>
          <label>Name</label>
          <input ng-model="newPet.name"/>
        </md-input-container>
        <md-input-container>
          <label>First Attribute</label>
          <input ng-model="newPet.attr1"/>
        </md-input-container>
        <md-input-container>
          <label>Second Attribute</label>
          <input ng-model="newPet.attr2"/>
        </md-input-container>
      </div>
    </md-content>
    <div layout="row" class="md-actions">
      <md-button ng-click="cancel()">Cancel</md-button>
      <md-button ng-click="purchase()" class="md-primary">Purchase</md-button>
    </div>
  </md-dialog>
</script>


<script id="pet" type="text/ng-template">
  <md-toolbar ng-if="pet">
    <h1 class="md-toolbar-tools"><span>{{pet.name}}, the level {{pet.level.__current}} {{pet.type}} {{pet.professionName}} with {{pet.attrs[0]}} and {{pet.attrs[1]}}</span></h1>
  </md-toolbar>
  <md-progress-linear mode="determinate" ng-value="xpPercent" ng-if="pet" class="player-xp"></md-progress-linear>
  <div id="pet-tabs" class="auto-flex md-whiteframe-z1 is-flex">
    <md-tabs md-selected="selectedIndex" layout="column" class="is-flex auto-flex md-accent">
      <md-tab ui-sref="pet.overview" label="{{pet ? 'Pet' : 'Buy a Pet'}}">
        <div ui-view="petoverview" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="pet.equipment" label="Equipment" ng-if="pet">
        <div ui-view="petequipment" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="pet.inventory" label="Inventory ({{pet.inventory.length}}/{{pet._configCache.scale.inventory[pet.scaleLevel.inventory]}})" ng-if="pet">
        <div ui-view="petinventory" class="tab"></div>
      </md-tab>
    </md-tabs>
  </div>
</script>


<script id="player-achievements" type="text/ng-template">
  <md-list layout="row" class="flex-scroll wrap-container has-height">
    <md-item ng-repeat="achievement in player.achievements" flex="25" class="md-whiteframe-z1">
      <md-item-content>
        <div class="md-tile-left text-center"><span class="fa-stack"><span ng-repeat="item in ::$parent.achievementTypeToIcon[achievement.type]" class="fa fa-stack-2x {{::item}}"></span></span></div>
        <div class="md-tile-content">
          <h3><span>{{::achievement.name}}</span>
            <div style="float:right"><span ng-if="achievement.title" class="fa fa-fw fa-tag">
                <md-tooltip>{{::achievement.title}}</md-tooltip></span><span class="fa fa-fw fa-clock-o">
                <md-tooltip><span am-time-ago="player.achievementTimes[achievement.name]"></span></md-tooltip></span></div>
          </h3>
          <h4>{{::achievement.desc}}</h4>
          <p>{{::achievement.reward}}</p>
        </div>
      </md-item-content>
    </md-item>
  </md-list>
</script>


<script id="player-battle" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container has-height">
    <div ng-if="!currentBattle" layout="column" style="align-items:center;justify-content:center" flex="100" class="text-center">
      <div>Nothing to see here. You have to select a battle from your Adventure Log to see it here.</div>
    </div>
    <div flex="30" layout="column" ng-if="currentBattle">
      <md-card layout="column" class="inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Teams ({{currentBattle.name}})</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div layout="column">
              <div ng-repeat="team in currentBattle.teams">
                <h3>Team "{{::team.name}}"</h3>
                <table>
                  <tr ng-repeat="member in team.members">
                    <td>{{::member.name}}</td>
                    <td>{{::member.level}}</td>
                    <td>{{::member.profession}}</td>
                  </tr>
                </table>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="70" layout="column" ng-if="currentBattle">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Combat Log ({{currentBattle.name}})</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:100px;height:100px" layout="column" class="is-flex auto-flex">
            <div style="margin-top:40px;padding-left:10px;align-items:center" flex="100" ng-repeat="message in currentBattle.messages track by $index" layout="row" class="is-flex auto-flex adventure-log-item">
              <htmldiv content="filterMessage(message)"></htmldiv>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
  </div>
</script>


<script id="player-collectibles" type="text/ng-template">
  <md-list layout="row" class="flex-scroll wrap-container has-height">
    <md-item ng-repeat="collectible in player.collectibles" flex="25" class="md-whiteframe-z1">
      <md-item-content>
        <div class="md-tile-content">
          <h3><span>{{collectible.name}}</span><span style="float:right" ng-if="collectible.flavorText" class="fa fa-fw fa-info-circle">
              <md-tooltip>{{::collectible.flavorText}}</md-tooltip></span></h3>
          <h4>Found&nbsp;<span am-time-ago="::collectible.foundAt"></span>&nbsp;in {{::collectible.map}} ({{::collectible.region}})</h4>
          <p>Rarity: {{::collectible.rarity || 'basic'}}</p>
        </div>
      </md-item-content>
    </md-item>
  </md-list>
</script>


<script id="player-equipment" type="text/ng-template">
  <md-list class="flex-scroll has-height">
    <md-item ng-repeat="item in playerItems track by $index">
      <ng-include src="'item-tpl'"></ng-include>
      <md-divider ng-if="!$last"></md-divider>
    </md-item>
  </md-list>
  <!--md-tabs.auto-flex.md-background(layout="column",md-align-tabs="bottom")
  md-tab.is-flex.auto-flex(label="Equipment")
      md-list.flex-scroll.has-height
          md-item(ng-repeat="item in playerItems track by $index")
              ng-include(src="'item-tpl'")
  md-tab.is-flex.auto-flex(label="Inventory ({{inventory.length}})")
      md-list.flex-scroll.has-height
          md-item(ng-repeat="item in inventory track by $index")
              ng-include(src="'item-tpl'")
  md-tab.is-flex.auto-flex(label="Shop ({{shop.length}})", ng-if="shop.length")
      md-list.flex-scroll.has-height
          md-item(ng-repeat="item in shop track by $index")
              ng-include(src="'item-tpl'")
  
  -->
</script>
<script type="text/ng-template" id="item-tpl">
  <md-item-content class="item-container">
    <div class="md-tile-left class-badge text-center align-left-list-item">
      <div class="{{itemUtilities.classToColor(item.itemClass)}}">{{::item.type}}
        <md-tooltip>{{item.itemClass}}</md-tooltip>
      </div>
      <div ng-if="::item.extraItemClass" class="{{::itemUtilities.classToColor(item.extraItemClass)}}">{{item.extraText}}</div>
      <!--equipped-->
      <div ng-if="!item.extraItemClass &amp;&amp; !item.hideButtons &amp;&amp; item.type !== 'providence'" class="text-center"><span ng-click="invItem(item)" class="hover-cursor fa fa-fw fa-caret-square-o-down">
          <md-tooltip>Add to Inventory</md-tooltip></span></div>
      <!--in overflow-->
      <div ng-if="_.isNumber(item.overflowSlot)" class="text-center"><span ng-if="::item.extraItemClass" ng-click="sellItem(item)" class="hover-cursor fa fa-fw icon-money text-red">
          <md-tooltip>Sell</md-tooltip></span><span ng-if="::item.extraItemClass" ng-click="swapItem(item)" class="hover-cursor fa fa-fw fa-exchange">
          <md-tooltip>Swap</md-tooltip></span><span ng-if="::item.extraItemClass" ng-click="sendToPet(item)" class="hover-cursor fa fa-fw fa-paw">
          <md-tooltip>Send to pet</md-tooltip></span></div>
      <!--in shop-->
      <div ng-if="_.isNumber(item.shopSlot)" class="text-center"><span ng-if="::item.extraItemClass" ng-click="buyItem(item)" class="hover-cursor fa fa-fw icon-money text-green">
          <md-tooltip>Buy</md-tooltip></span></div>
    </div>
    <div class="md-tile-content item-line">
      <div>
        <h3 class="super-bold">{{item.enchantLevel ? '+'+item.enchantLevel+' ' : ''}} {{item.name}}</h3>
      </div>
      <div><small ng-if="item.foundAt" class="text-subdued"><span>Found</span><span>&nbsp;</span><span am-time-ago="item.foundAt"></span><span>, with a Player Relativity of</span><span>&nbsp;{{playerItemScore(item)}}%&nbsp;</span><span>and an Item Relativity of</span><span>&nbsp;{{itemItemScore(item)}}%</span></small></div>
      <div layout="row" class="top-margin-5 wrap-container"><span ng-repeat="stat in ::itemUtilities.equipmentStatArray" flex="16" ng-class="{'text-tertiary': item[stat.name] === 0 &amp;&amp; item[stat.name+'Percent'] === 0}" class="vital-stat"><span class="fa fa-fw fa-lg {{::stat.fa}}">
            <md-tooltip>{{::stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(item[stat.name])}}">{{item[stat.name]}}</small><small>&nbsp;/&nbsp;</small><small class="{{valueToColor(item[stat.name+'Percent'])}}">{{item[stat.name+'Percent']}}%</small></span></div>
      <div class="top-margin-5"><small>{{itemUtilities.getExtraStats(item)}}</small></div>
    </div>
  </md-item-content>
</script>


<script id="player-guild" type="text/ng-template">
  <div layout="row" ng-if="!currentlyInGuild" class="tab-containment is-flex auto-flex wrap-container has-height">
    <div flex="40" offset="30" layout="column">
      <md-card layout="column">
        <md-card-content layout="column">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Create New Guild (costs 100k gold)</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:80px;height:80px;overflow-x:hidden;align-items:center" layout="row" class="is-flex auto-flex">
            <md-input-container flex="75" offset="5">
              <label>Guild Name</label>
              <input ng-model="editable.guildName"/>
            </md-input-container>
            <div flex="20">
              <md-button ng-click="createGuild()" class="md-primary">Create</md-button>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" ng-if="guildInvites.length &gt; 0" class="is-flex auto-flex inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Guild Invites</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:120px;height:120px;overflow-x:hidden" layout="column" class="is-flex auto-flex">
            <div flex="100" quick-repeat-list="guildInvites" quick-ng-repeat="invite in guildInvites" layout="row" class="is-flex auto-flex adventure-log-item">
              <div flex="55" offset="5"><a href="http://idle.land/s/guild/{{invite}}" target="_blank">{{invite}}</a></div>
              <div flex="20">
                <md-button ng-click="$parent.manageInvite(invite, true)" class="md-primary">Accept</md-button>
              </div>
              <div flex="20">
                <md-button ng-click="$parent.manageInvite(invite, false)" class="md-warn">Reject</md-button>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
  </div>
  <div layout="row" ng-if="currentlyInGuild" class="tab-containment is-flex auto-flex wrap-container has-height">
    <div flex="25" layout="column">
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>{{::guild.name}}</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div class="vital-stat"><span class="fa fa-fw fa-user"></span><span>&nbsp;Led by {{::orderedMembers[0].name}}</span></div>
            <div class="vital-stat"><span class="fa fa-fw fa-clock-o"></span><span>&nbsp;Founded <span am-time-ago="::guild.createDate"></span></span></div>
            <div class="vital-stat"><span class="fa fa-fw fa-sitemap"></span><span>&nbsp;Level {{guild.level}}</span></div>
            <div class="vital-stat"><span class="fa fa-fw fa-envelope"></span><span>&nbsp;{{guild.invitesAvailable}} invites left</span></div>
            <div class="vital-stat"><span class="fa fa-fw icon-money"></span><span>&nbsp;{{guild.gold.__current |number:0}} gold</span></div>
            <div ng-if="guildHallMap" class="vital-stat"><span class="fa fa-fw fa-globe"></span>
              <md-button target="_blank" href="http://idle.land/s/maps/{{guildHallMap}}" class="inline-button md-accent md-raised">Guild Hall</md-button>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" ng-if="isAdmin" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Invite Players</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div class="vital-stat"><span class="fa fa-user-plus fa-fw"></span>
              <md-button href="href" editable-text="editable.newMember" onaftersave="inviteMember()" class="inline-button md-accent md-hue-1 md-raised">{{edtiable.newMember || 'Invite a new member!'}}</md-button>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Actions</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div ng-if="isLeader" class="vital-stat"><span flex="10" class="fa fa-fw fa-home"></span>
              <md-select ng-model="guild.base" ng-change="move()" class="no-margin-top">
                <md-select-label>{{guild.base}}</md-select-label>
                <md-option ng-value="opt.name" ng-repeat="opt in guild.validBases">{{opt.name}}</md-option>
              </md-select>
            </div>
            <div ng-if="!isLeader" class="vital-stat"><span flex="10" class="fa fa-fw fa-anchor"></span>
              <md-button ng-click="leaveGuild()" flex="90" class="inline-button md-warn md-raised">Leave</md-button>
            </div>
            <div ng-if="isLeader" class="vital-stat"><span flex="10" class="fa fa-fw fa-anchor"></span>
              <md-button ng-click="disbandGuild()" class="inline-button md-warn md-raised">Disband</md-button>
            </div>
            <div flex="flex" layout="row" class="vital-stat"><span flex="10" style="justify-content:center;align-self:center" class="fa fa-fw fa-usd">
                <md-tooltip>Guild Tax Rate ({{editable.guildTaxRate}}%)</md-tooltip></span>
              <md-slider flex="80" ng-model="editable.guildTaxRate" min="0" max="15" md-discrete="md-discrete" aria-label="Guild Tax Rate" ng-disabled="!isLeader" ng-change="updateGuildTax()" class="md-accent md-hue-1"></md-slider>
            </div>
            <div flex="flex" layout="row" class="vital-stat"><span flex="10" style="justify-content:center;align-self:center" class="fa fa-fw fa-usd">
                <md-tooltip>Self Tax Rate ({{editable.selfTaxRate}}%)</md-tooltip></span>
              <md-slider flex="80" ng-model="editable.selfTaxRate" min="0" max="85" md-discrete="md-discrete" aria-label="Self Tax Rate" ng-change="updateSelfTax()" class="md-accent md-hue-2"></md-slider>
            </div>
            <div quick-ng-repeat="tier in goldTiers" quick-repeat-list="goldTiers" class="vital-stat"><span flex="10" class="fa fa-fw icon-money"></span>
              <md-button ng-click="donateGold(tier)" class="inline-button md-primary md-raised">Donate {{tier | number:0}} gold</md-button>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="45" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Guild Roster ({{guild.members.length}} members)</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:50px;height:50px;overflow-x:hidden" layout="column" class="is-flex auto-flex">
            <div style="min-height: 50px" flex="100" quick-repeat-list="orderedMembers" quick-ng-repeat="member in orderedMembers" layout="row" class="is-flex auto-flex adventure-log-item">
              <div flex="10" class="text-center vertical-center"><span ng-class="{'text-green': member._cache.online, 'text-red': !member._cache.online, 'fa-rotate-90 text-tertiary': isInvited(member)}" class="fa fa-fw fa-2x {{iconForMember(member)}}">
                  <md-tooltip>{{getTooltipText(member)}}</md-tooltip></span></div>
              <div flex="50">
                <div ng-class="{'italic text-tertiary': isInvited(member)}">{{member.name}}</div>
                <div ng-if="member._cache.level &amp;&amp; member._cache.class"><small>Level {{member._cache.level}} {{member._cache.class}}</small><small ng-if="member._cache.lastSeen &amp;&amp; !member._cache.online"><br>Last seen <span am-time-ago="member._cache.lastSeen"></span></small></div>
                <div ng-if="!member._cache.level &amp;&amp; !member._cache.class &amp;&amp; !isInvited(member)">Profile Unknown</div>
              </div>
              <div flex="20" ng-if="!member.isAdmin &amp;&amp; !$first">
                <md-button ng-if="isLeader" ng-click="promoteMember(member.name)" class="md-accent md-raised">Promote</md-button>
              </div>
              <div flex="20" ng-if="member.isAdmin &amp;&amp; !$first">
                <md-button ng-if="isLeader" ng-click="demoteMember(member.name)" class="md-warn md-raised md-hue-2">Demote</md-button>
              </div>
              <div flex="20">
                <md-button ng-if="canKick(member)" ng-click="kickMember(member.name)" class="md-warn md-raised">Kick</md-button>
                <md-button ng-if="canRescind(member)" ng-click="rescindInvite(member.identifier)" class="md-warn md-raised">Rescind</md-button>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="30" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div flex="100" layout="row" class="md-toolbar-tools">
              <h3><a href="http://doks.idle.land/#!/Guild/Buildings" target="_blank" class="inline-link fa fa-question-circle"></a>&nbsp;Guild Buildings</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:50px;height:50px" layout="column" class="is-flex auto-flex">
            <div flex="100" quick-repeat-list="buildings" quick-ng-repeat="building in buildings" layout="row" class="is-flex auto-flex adventure-log-item">
              <div flex="5"></div>
              <div flex="50">
                <div>{{::building}}</div>
                <div><small>Level {{guild.buildingLevels[building] || 0}}</small></div>
              </div>
              <div flex="45" ng-if="isLeader"><span ng-if="hasBuilt(building)">
                  <md-button ng-disabled="!canBuild(guild.buildingLevelCosts[building])" ng-click="upgradeBuilding(building)" class="md-raised md-primary">Upgrade
                    <md-tooltip>Next Level Cost: {{guild.buildingLevelCosts[building] | number:0}} gold</md-tooltip>
                  </md-button>
                  <md-button ng-if="guild._validProps[building].length" ng-click="openProps(building)" class="md-raised md-accent">Props</md-button></span>
                <md-button ng-click="constructBuilding(building)" ng-if="!hasBuilt(building)" ng-disabled="!canBuild(flatCosts[guild.base].costs.build[guild.validBuildings[building].size])" class="md-raised md-primary md-hue-1">Construct
                  <md-tooltip>Build Cost: {{flatCosts[guild.base].costs.build[guild.validBuildings[building].size] | number:0}} gold</md-tooltip>
                </md-button>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
  </div>
</script>
<script type="text/ng-template" id="building-Academy">
  <h3><a href="http://doks.idle.land/#!/Guild/Buffs" target="_blank" class="inline-link fa fa-question-circle"></a>&nbsp;Guild Buffs</h3>
  <div>Buff Level</div>
  <md-slider min="1" max="{{guild.buildingGlobals.Academy.maxBuffLevel}}" ng-model="editable.buffLevel" md-discrete="md-discrete" aria-label="buff level" class="md-accent"></md-slider>
  <div flex="100" ng-repeat="type in ::buffTypes" layout="row" class="is-flex auto-flex adventure-log-item bottom-margin-15">
    <div flex="15" class="text-center vertical-center"><span class="fa fa-fw fa-2x {{::nameToIcon(type)}}"></span></div>
    <div flex="60">
      <div>{{buffs[type] ? buffs[type].name : type}}</div>
      <div ng-if="buffs[type]">Expires <span am-time-ago="buffs[type].expire"></span></div>
      <dif ng-if="!buffs[type]">Not Purchased</dif>
    </div>
    <div flex="25">
      <md-button ng-click="buyBuff(type)" class="md-primary md-hue-1 md-raised">Buy</md-button>
    </div>
  </div>
</script>
<script type="text/ng-template" id="buildingProps">
  <md-dialog>
    <md-content>
      <md-subheader class="md-sticky-no-effect">
        <h2>{{building}} Properties</h2>
      </md-subheader>
      <div layout="column">
        <div ng-repeat="prop in guild._validProps[building]">
          <div flex="20" ng-if="prop.values">{{prop.name}}</div>
          <div flex="80">
            <md-input-container ng-if="!prop.values">
              <label>{{prop.name}}</label>
              <input type="text" ng-model="props[prop.name]"/>
            </md-input-container>
            <md-select ng-model="props[prop.name]" ng-if="_.isArray(prop.values)">
              <md-select-label>{{props[prop.name]}}</md-select-label>
              <md-option ng-value="opt" ng-repeat="opt in prop.values">{{opt}}</md-option>
            </md-select>
          </div>
        </div>
      </div>
      <ng-include src="'building-'+building"></ng-include>
    </md-content>
    <div layout="row" class="md-actions">
      <md-button ng-click="close()" class="md-raised">Close</md-button>
      <md-button ng-click="save()" class="md-primary md-raised">Confirm</md-button>
    </div>
  </md-dialog>
</script>
<script type="text/ng-template" id="construct">
  <md-dialog>
    <md-content>
      <md-subheader class="md-sticky-no-effect">
        <h2>Choose a Slot for {{building}}</h2>
      </md-subheader>
      <md-radio-group ng-model="slot">
        <md-radio-button ng-repeat="slot in takenSlots track by $index" ng-value="$index">{{slot || 'empty'}}</md-radio-button>
      </md-radio-group>
      <div layout="row" class="md-actions">
        <md-button ng-click="close()" class="md-raised">Close</md-button>
        <md-button ng-click="save()" class="md-primary md-raised">Confirm</md-button>
      </div>
    </md-content>
  </md-dialog>
</script>


<script id="player-map" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container">
    <div>{{drawMap()}}</div>
    <div id="map"></div>
  </div>
</script>


<script id="player-options" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container has-height">
    <div flex="25" layout="column">
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Player Options</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div class="vital-stat"><span class="fa fa-fw fa-sign-out fa-lg vertical-center"></span>
              <md-button ng-click="logout()" class="inline-button md-warn md-raised">Log Out</md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw fa-paper-plane fa-lg vertical-center"></span>
              <md-button ng-click="openSubmissionWindow()" class="inline-button md-accent md-raised">Submit New Content</md-button>
            </div>
            <div ng-if="player.isContentModerator" class="vital-stat"><span class="fa fa-fw fa-bullhorn fa-lg vertical-center"></span>
              <md-button ng-click="openModerationWindow()" class="inline-button md-accent md-raised">Moderate Content ({{customContentList.length}} items)</md-button>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3><a href="https://github.com/IdleLands/IdleLands/wiki/New-Player-Guide#pushbullet" target="_blank" class="fa fa-question-circle">&nbsp;PushBullet</a></h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div class="vital-stat"><span class="fa fa-fw fa-key fa-lg vertical-center"></span>
              <md-button href="href" editable-text="player.pushbulletApiKey" onaftersave="updatePushbullet()" class="inline-button md-accent md-hue-1 md-raised">{{player.pushbulletApiKey || 'No PushBullet API key set'}}</md-button>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3><a href="https://github.com/IdleLands/IdleLands/wiki/New-Player-Guide#gender" target="_blank" class="fa fa-question-circle">&nbsp;Gender</a></h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div class="vital-stat"><span class="fa fa-fw fa-venus-mars fa-lg vertical-center"></span>
              <md-button href="href" editable-text="player.gender" onaftersave="updateGender()" class="inline-button md-accent md-hue-1 md-raised">{{player.gender || 'No gender specified'}}</md-button>
            </div>
            <md-radio-group ng-model="player.gender" ng-change="updateGender()" class="md-accent">
              <md-radio-button value="female">Female</md-radio-button>
              <md-radio-button value="male">Male</md-radio-button>
              <md-radio-button value="glowcloud">Glowcloud</md-radio-button>
              <md-radio-button value="not a bear">Bear</md-radio-button>
              <md-radio-button value="astroentity">Astronomical Entity</md-radio-button>
              <md-radio-button value="secret">A Secret to Everybody</md-radio-button>
            </md-radio-group>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="55" layout="column">
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3><a href="https://github.com/IdleLands/IdleLands/wiki/New-Player-Guide#priority-points" target="_blank" class="fa fa-question-circle">&nbsp;Priority Points</a></h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div layout="row" class="wrap-container">
              <md-input-container flex="33" ng-repeat="(stat,val) in player.priorityPoints track by $index">
                <label>{{::stat}}</label>
                <input type="number" min="0" max="6" ng-model="player.priorityPoints[stat]" ng-focus="tempPP[stat] = player.priorityPoints[stat]" ng-change="updatePP(stat)"/>
              </md-input-container>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3><a href="https://github.com/IdleLands/IdleLands/wiki/New-Player-Guide#custom-strings" target="_blank" class="fa fa-question-circle">&nbsp;Custom Strings</a></h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <table>
              <tr ng-repeat="key in strings.keys track by $index" class="vital-stat">
                <td width="15%">
                  <md-button ng-class="{'md-primary': !strings.keys[$index], 'md-accent': strings.keys[$index]}" editable-text="strings.keys[$index]" class="inline-button md-raised">{{strings.keys[$index] || 'Add new...'}}</md-button>
                </td>
                <td width="65%">
                  <md-button editable-text="strings.values[$index]" ng-if="strings.keys[$index]" class="inline-button md-accent md-raised">{{strings.values[$index] || '(not set)'}}</md-button>
                </td>
                <td width="10%" class="text-right">
                  <md-button ng-if="strings.keys[$index]" ng-click="removeString(strings.keys[$index], $index)" class="inline-button md-warn md-raised">Remove</md-button>
                </td>
              </tr>
            </table>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="20" layout="column">
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Scrollback.io</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding hide-y-scrollbar">
            <md-switch ng-model="options.scrollback" ng-true-value="'true'" ng-false-value="'false'">Use Chat</md-switch>
            <div class="vital-stat"><span style="margin-left:18px; margin-right:18px" class="fa fa-fw fa-arrows-h"></span>
              <md-select ng-model="scrollbackPos" ng-change="changeScrollbackPosition()" class="no-margin-top">
                <md-select-label>{{scrollbackPos}}</md-select-label>
                <md-option ng-value="pos" ng-repeat="pos in ['left', 'center', 'right']">{{pos}}</md-option>
              </md-select>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Settings</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding hide-y-scrollbar"><span class="fa fa-fw fa-tint">
              <md-tooltip>Theme</md-tooltip></span>
            <md-select ng-model="theme" ng-change="changeTheme()" class="no-margin-top">
              <md-select-label>{{theme}}</md-select-label>
              <md-option ng-value="theme" ng-repeat="theme in themes">{{theme}}</md-option>
            </md-select>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>External Links</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <div class="vital-stat-2x"><span class="fa fa-fw fa-rss fa-lg vertical-center"></span>
              <md-button target="_blank" href="http://blog.idle.land" class="inline-button md-accent md-raised">Blog</md-button>
            </div>
            <div class="vital-stat-2x"><span class="fa fa-fw fa-reddit fa-lg vertical-center"></span>
              <md-button target="_blank" href="http://reddit.com/r/idle_lands" class="inline-button md-primary md-raised">/r/idle_lands</md-button>
            </div>
            <div class="vital-stat-2x"><span class="fa fa-fw fa-question fa-lg vertical-center"></span>
              <md-button target="_blank" href="https://github.com/IdleLands/IdleLands/wiki/New-Player-Guide#faq" class="inline-button md-primary md-raised">FAQ</md-button>
            </div>
            <div class="vital-stat-2x"><span class="fa fa-fw fa-bar-chart fa-lg vertical-center"></span>
              <md-button target="_blank" href="http://idle.land/s/analytics/{{player.name}}" class="inline-button md-accent md-raised">Your Analytics</md-button>
            </div>
            <div class="vital-stat-2x"><span class="fa fa-fw fa-github fa-lg vertical-center"></span>
              <md-button target="_blank" href="https://github.com/IdleLands/IdleLands" class="inline-button md-accent md-raised">IdleLands @ GitHub</md-button>
            </div>
            <div class="vital-stat-2x"><span class="fa fa-fw fa-thumbs-up fa-lg vertical-center"></span>
              <md-button target="_blank" href="http://idle.land/s/thanks" class="inline-button md-accent md-raised">Special Thanks</md-button>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
  </div>
</script>
<script id="moderate-content" type="text/ng-template">
  <md-dialog>
    <md-content>
      <md-subheader class="md-sticky-no-effect">
        <h2>Moderate Custom Content</h2>
      </md-subheader>
      <div layout="row" layout-align="space-around center" style="padding:15px">
        <md-button ng-click="toggleAll()" class="md-accent md-raised">Toggle All</md-button>
        <md-button ng-click="refreshData()" class="md-accent md-raised">Refresh</md-button>
        <md-button ng-click="reject()" class="md-warn md-raised">Reject</md-button>
        <md-button ng-click="approve()" class="md-primary md-raised">Approve</md-button>
      </div>
      <div layout="row">
        <table>
          <thead>
            <tr>
              <th></th>
              <th width="100px">Type</th>
              <th width="400px">Content</th>
              <th width="200px">Submitter</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in customContentList">
              <td>
                <md-switch ng-model="item.currentlySelected" aria-label="Toggle Selection"></md-switch>
              </td>
              <td>{{item.type}}</td>
              <td>{{item.content}}</td>
              <td>{{item.submitterName}}, <span am-time-ago='item.submissionTime'></span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </md-content>
    <div layout="row" class="md-actions">
      <md-button ng-click="cancel()" class="md-warn md-raised">Close</md-button>
    </div>
  </md-dialog>
</script>
<script id="submit-content" type="text/ng-template">
  <md-dialog>
    <md-content>
      <md-subheader class="md-sticky-no-effect">
        <h2>Submit New Custom Content</h2>
      </md-subheader>
      <div layout="row">
        <md-select ng-model="data.type">
          <md-select-label>{{data.type.type}}</md-select-label>
          <md-optgroup ng-repeat="folder in folders" label="{{folder}}">
            <md-option ng-value="obj" ng-repeat="obj in types | filter:{folder: folder}">{{obj.type}}</md-option>
          </md-optgroup>
        </md-select>
        <md-input-container ng-if="data.type.requiresName">
          <label>Name of Object</label>
          <input ng-model="data._name"/>
        </md-input-container>
        <md-input-container class="extended-input">
          <label>Custom Content</label>
          <input ng-model="data.content"/>
        </md-input-container>
      </div>
    </md-content>
    <div layout="row" class="md-actions">
      <md-button target="_blank" href="https://github.com/IdleLands/IdleLands/wiki/Content-Crafting" ng-if="data.type.type !== 'towncrier'" class="md-accent md-raised">Help</md-button>
      <md-button target="_blank" href="https://github.com/IdleLands/IdleLands/wiki/Town-Crier-Guide" ng-if="data.type.type === 'towncrier'" class="md-accent md-raised">Help</md-button>
      <md-button target="_blank" href="https://github.com/IdleLands/IdleLands/tree/master/assets/data/{{data.type.folder}}/{{data.type.type}}.txt" ng-if="data.type.type !== 'towncrier'" class="md-accent md-raised">Show Example</md-button>
      <md-button ng-click="cancel()" class="md-warn md-raised">Cancel</md-button>
      <md-button ng-click="test()" ng-if="data.type.testable" class="md-primary md-hue-1 md-raised">Test</md-button>
      <md-button ng-click="submit()" class="md-primary md-raised">Submit</md-button>
    </div>
  </md-dialog>
</script>


<script id="player-overview" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container">
    <div flex="25" layout="column">
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Status</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding hide-y-scrollbar">
            <div layout="row">
              <div flex="33" class="vital-stat"><span class="fa fa-fw fa-heart fa-lg text-red vertical-center">
                  <md-tooltip>Max HP</md-tooltip></span><span>&nbsp;</span><small>{{player.hp.maximum | number:0}}</small></div>
              <div flex="33" class="vital-stat"><span class="fa fa-fw fa-magic fa-lg text-blue vertical-center">
                  <md-tooltip>Max MP</md-tooltip></span><span>&nbsp;</span><small>{{player.mp.maximum | number:0}}</small></div>
              <div flex="33" class="vital-stat"><span class="fa fa-fw fa-asterisk fa-lg text-yellow vertical-center">
                  <md-tooltip>Special Stat</md-tooltip></span><span>&nbsp;</span><small>{{player.special.name || 'None'}}</small></div>
            </div>
            <div layout="row">
              <div flex="100" class="vital-stat"><span class="fa fa-fw icon-money fa-lg text-gold vertical-center">
                  <md-tooltip>Gold</md-tooltip></span><span>&nbsp;</span><small>{{player.gold.__current | number:0}}</small></div>
            </div>
            <div layout="row" class="wrap-container">
              <div ng-repeat="stat in ::equipmentStatArray" flex="25" class="vital-stat"><span class="fa fa-fw fa-lg vertical-center {{::stat.fa}}">
                  <md-tooltip>{{::stat.name}}</md-tooltip></span><span>&nbsp;</span><small ng-class="{'text-red': player._statCache[stat.name] &lt; 0, 'text-green': player._statCache[stat.name] &gt; 0}">{{player._statCache[stat.name] | number:0}}</small></div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" ng-if="numFoundPets &gt; 0" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Pet Information</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding hide-y-scrollbar">
            <div layout="column">
              <div class="vital-stat"><span class="fa fa-fw fa-dashboard"></span>
                <md-button ng-click="toPetView()" class="inline-button md-primary md-raised md-hue-1">Swap to Pet View</md-button>
              </div>
              <div class="vital-stat"><span class="fa fa-fw fa-paw"></span><span>&nbsp;{{numBoughtPets}}/{{numFoundPets}} Pets</span></div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Miscellaneous</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding hide-y-scrollbar">
            <div layout="column">
              <div class="vital-stat"><span class="fa fa-fw fa-institution">
                  <md-tooltip>Prayer</md-tooltip></span>
                <md-button ng-disabled="praying" ng-click="pray()" class="inline-button md-accent md-raised">{{prayText}}
                  <md-tooltip>Praying raises Superstition by 1</md-tooltip>
                </md-button>
              </div>
              <div ng-if="player.titles.length &gt; 0" class="vital-stat"><span class="fa fa-fw fa-tag">
                  <md-tooltip>Title</md-tooltip></span>
                <md-select ng-model="player.title" ng-change="changeTitle()" class="no-margin-top">
                  <md-select-label>{{player.title}}</md-select-label>
                  <md-option ng-value="title" ng-repeat="title in titles">{{title}}</md-option>
                </md-select>
              </div>
              <div class="vital-stat"><span class="fa fa-fw fa-globe">
                  <md-tooltip>World Position</md-tooltip></span><span>&nbsp;{{player.map}} ~ {{player.x}}, {{player.y}}</span></div>
              <div class="vital-stat"><span class="fa fa-fw fa-map-marker">
                  <md-tooltip>Map Region</md-tooltip></span><span>&nbsp;{{player.mapRegion}}</span></div>
              <div ng-if="player.shop" class="vital-stat"><span class="fa fa-fw icon-money faa-tada animated">
                  <md-tooltip>Current Shop</md-tooltip></span><span>&nbsp;In shop: {{player.shop.region}}!</span></div>
              <div class="vital-stat"><span class="fa fa-fw fa-users">
                  <md-tooltip>Party</md-tooltip></span><span>&nbsp;{{player.partyName || 'No party'}}</span></div>
              <div class="vital-stat"><span class="fa fa-fw fa-sitemap">
                  <md-tooltip>Guild</md-tooltip></span><span>&nbsp;{{player.guild || 'No guild'}}</span></div>
              <div><span class="fa fa-fw fa-clock-o">
                  <md-tooltip>Creation Date</md-tooltip></span><span>&nbsp;Started&nbsp;</span><span am-time-ago="::player.registrationDate">
                  <!--md-tooltip {{::player.registrationDate | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}--></span></div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="55" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Adventure Log</h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:120px;height:120px;overflow-x:hidden" layout="column" class="is-flex auto-flex">
            <div style="min-height:100px" flex="100" ng-repeat="event in _recentEvents" layout="row" class="is-flex auto-flex adventure-log-item">
              <div flex="10" class="text-center vertical-center"><span ng-click="clickOnEvent(event.extra)" ng-class="{'hover-cursor': event.extra.battleId, 'hover-cursor faa-horizontal animated': event.extra.gift, 'hover-cursor text-gold': event.extra.link}" class="fa fa-fw fa-2x {{::eventTypeToIcon[event.type]}}"></span></div>
              <div flex="90"><small am-time-ago="event.createdAt"></small>
                <div ng-bind-html="event.message | linky:'_blank'"></div>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="20" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-card-content layout="column" class="is-flex auto-flex">
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3><a href="http://doks.idle.land/#!/Player/Personalities" target="_blank" class="fa fa-question-circle">&nbsp; Personalities</a></h3>
            </div>
          </md-toolbar>
          <md-content style="flex-basis:50px;height:50px" layout="column" class="is-flex auto-flex">
            <div style="min-height:30px" quick-repeat-list="_personalities" quick-ng-repeat="personality in _personalities" class="is-flex auto-flex adventure-log-item">
              <div flex="30" class="top-margin-15">
                <md-switch ng-model="personalityToggle[personality]" aria-label="Personality Switch" ng-change="togglePersonality(personality)" class="personality-switch"></md-switch>
              </div>
              <div flex="70">
                <div style="margin-top:10px">{{::personality}}</div>
              </div>
            </div>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
  </div>
</script>


<script id="player" type="text/ng-template">
  <md-toolbar>
    <h1 class="md-toolbar-tools">
      <md-progress-circular mode="determinate" value="{{turnTimeValue}}" style="float:right" class="player-turn md-accent"></md-progress-circular><span>{{::player.name}}, the level {{player.level.__current}} {{player.professionName}}</span>
    </h1>
  </md-toolbar>
  <md-progress-linear mode="determinate" ng-value="xpPercent" class="player-xp"></md-progress-linear>
  <div id="player-tabs" class="top-margin-5 auto-flex md-whiteframe-z1 is-flex">
    <md-tabs md-selected="selectedIndex" layout="column" class="is-flex auto-flex md-accent">
      <md-tab ui-sref="player.overview" label="Player">
        <div ui-view="overview" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.map" label="Map">
        <div ui-view="map" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.equipment" label="Equipment">
        <div ui-view="equipment" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.guild" label="Guild">
        <div ui-view="guild" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.battle" label="Battle">
        <div ui-view="battle" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.collectibles" label="Collectibles ({{player.collectibles.length}})" ng-show="player.collectibles.length &gt; 0">
        <div ui-view="collectibles" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.achievements" label="Achievements ({{player.achievements.length}})">
        <div ui-view="achievements" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.statistics" label="Statistics">
        <div ui-view="statistics" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.options" label="Options">
        <div ui-view="options" class="tab"></div>
      </md-tab>
    </md-tabs>
  </div>
</script><script>window.scrollback = {room:"idlelands",form:"canvas",theme:"dark",minimize:true};(function(d,s,h,e){e=d.createElement(s);e.async=0;e.src=(location.protocol === "https:" ? "https:" : "http:") + "//scrollback.io/client.min.js";d.getElementsByTagName(s)[0].parentNode.appendChild(e);}(document,"script"));</script>


<script id="player-statistics" type="text/ng-template">
  <div layout="row" class="flex-scroll has-height">
    <div flex="25">
      <md-card class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Calculated Statistics</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <statistics-tree root="player.statistics" stats="statisticsKeys['calculated']" family="'calculated'"></statistics-tree>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="25">
      <md-card class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Combat Statistics</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <statistics-tree root="player.statistics" stats="statisticsKeys['combat self']" family="'combat self'"></statistics-tree>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="25">
      <md-card ng-if="showPermStats" class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Special Statistics</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <statistics-tree root="player.permanentAchievements" stats="permanentStatisticsKeys" family="''"></statistics-tree>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Event Statistics</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <statistics-tree root="player.statistics" stats="statisticsKeys['event']" family="'event'"></statistics-tree>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
    <div flex="25">
      <md-card class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Exploration Statistics</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <statistics-tree root="player.statistics" stats="statisticsKeys['explore']" family="'explore'"></statistics-tree>
          </md-content>
        </md-card-content>
      </md-card>
      <md-card class="inner-card">
        <md-card-content>
          <md-toolbar>
            <div class="md-toolbar-tools">
              <h3>Player Statistics</h3>
            </div>
          </md-toolbar>
          <md-content class="card-padding">
            <statistics-tree root="player.statistics" stats="statisticsKeys['player']" family="'player'"></statistics-tree>
          </md-content>
        </md-card-content>
      </md-card>
    </div>
  </div>
</script>
<script id="statistics-template" type="text/ng-template">
  <table>
    <tr ng-repeat="stat in orderedData">
      <td class="text-{{stat.alignment}}">{{stat.name}}</td>
      <td class="text-center">{{stat.value}}</td>
    </tr>
  </table>
</script>